<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RedM Blacksmith Business Tool</title>
    <style>
        :root {
            --primary-color: #3d5a80;
            --secondary-color: #98c1d9;
            --accent-color: #ee6c4d;
            --light-color: #f7f7f7;
            --dark-color: #293241;
            --border-radius: 8px;
            --box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light-color);
            color: var(--dark-color);
            padding: 20px;
            line-height: 1.6;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: var(--dark-color);
            color: var(--light-color);
            border-radius: var(--border-radius);
        }
        
        h1, h2, h3 {
            margin-bottom: 15px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .section {
            background-color: white;
            margin-bottom: 20px;
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .section-content {
            display: none;
            padding-top: 15px;
        }
        
        .section-content.active {
            display: block;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
        }
        
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        th {
            background-color: var(--secondary-color);
            color: var(--dark-color);
        }
        
        input[type="number"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .profit-positive {
            color: green;
        }
        
        .profit-negative {
            color: red;
        }
        
        .item-card {
            border: 1px solid #eee;
            border-radius: var(--border-radius);
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .item-header {
            display: flex;
            justify-content: space-between;
            cursor: pointer;
            font-weight: bold;
        }
        
        .item-content {
            display: none;
            margin-top: 10px;
        }
        
        .item-content.active {
            display: block;
        }
        
        .calculator {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .calculator-inputs {
            flex: 1;
            min-width: 300px;
        }
        
        .calculator-results {
            flex: 2;
            min-width: 300px;
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: var(--border-radius);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        select, input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background-color: var(--accent-color);
        }
        
        .toggle-icon::after {
            content: "▼";
            margin-left: 5px;
            font-size: 0.8em;
        }
        
        .section-header.active .toggle-icon::after,
        .item-header.active .toggle-icon::after {
            content: "▲";
        }
        
        .result-table {
            margin-top: 15px;
        }
        
        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .calculator {
                flex-direction: column;
            }
            
            .calculator-inputs,
            .calculator-results {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>RedM Blacksmith Business Tool</h1>
            <p>Manage your blacksmith shop efficiently by calculating costs, profits, and resource requirements</p>
        </header>
        
        <!-- Shop Overview Section -->
        <div class="section">
            <div class="section-header active" onclick="toggleSection(this)">
                <h2>Shop Overview</h2>
                <span class="toggle-icon"></span>
            </div>
            <div class="section-content active">
                <h3>Raw Material Costs</h3>
                <table id="raw-materials-table">
                    <thead>
                        <tr>
                            <th>Material</th>
                            <th>Cost Per Unit ($)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Wood Logs</td>
                            <td><input type="number" id="wood-logs-cost" value="2.00" min="0" step="0.01" onchange="updateCalculations()"></td>
                        </tr>
                        <tr>
                            <td>Iron Ore</td>
                            <td><input type="number" id="iron-ore-cost" value="0.60" min="0" step="0.01" onchange="updateCalculations()"></td>
                        </tr>
                        <tr>
                            <td>Coal</td>
                            <td><input type="number" id="coal-cost" value="0.50" min="0" step="0.01" onchange="updateCalculations()"></td>
                        </tr>
                        <tr>
                            <td>Buck Skin</td>
                            <td><input type="number" id="buck-skin-cost" value="1.00" min="0" step="0.01" onchange="updateCalculations()"></td>
                        </tr>
                        <tr>
                            <td>Copper</td>
                            <td><input type="number" id="copper-cost" value="0.50" min="0" step="0.01" onchange="updateCalculations()"></td>
                        </tr>
                        <tr>
                            <td>Clay</td>
                            <td><input type="number" id="clay-cost" value="" min="0" step="0.01" placeholder="Enter cost" onchange="updateCalculations()"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Craftable Item Recipes Section -->
        <div class="section">
            <div class="section-header" onclick="toggleSection(this)">
                <h2>Craftable Item Recipes</h2>
                <span class="toggle-icon"></span>
            </div>
            <div class="section-content">
                <div id="craftable-items">
                    <!-- Iron Bar -->
                    <div class="item-card">
                        <div class="item-header" onclick="toggleItem(this)">
                            <span>Iron Bar (makes 5)</span>
                            <span class="toggle-icon"></span>
                        </div>
                        <div class="item-content">
                            <h4>Ingredients:</h4>
                            <table>
                                <tr>
                                    <td>Iron Ore:</td>
                                    <td><input type="number" value="5" min="0" step="1" id="iron-bar-iron-ore" onchange="updateItemCosts('iron-bar')"></td>
                                </tr>
                                <tr>
                                    <td>Coal:</td>
                                    <td><input type="number" value="2" min="0" step="1" id="iron-bar-coal" onchange="updateItemCosts('iron-bar')"></td>
                                </tr>
                            </table>
                            <div>
                                <p>Total Cost: $<span id="iron-bar-cost">0.00</span></p>
                                <p>Sale Value: $<input type="number" value="1.00" min="0" step="0.01" id="iron-bar-value" onchange="updateItemCosts('iron-bar')"></p>
                                <p>Profit per Craft: $<span id="iron-bar-profit">0.00</span></p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Nails -->
                    <div class="item-card">
                        <div class="item-header" onclick="toggleItem(this)">
                            <span>Nails (makes 5)</span>
                            <span class="toggle-icon"></span>
                        </div>
                        <div class="item-content">
                            <h4>Ingredients:</h4>
                            <table>
                                <tr>
                                    <td>Iron Bar:</td>
                                    <td><input type="number" value="1" min="0" step="1" id="nails-iron-bar" onchange="updateItemCosts('nails')"></td>
                                </tr>
                            </table>
                            <div>
                                <p>Total Cost: $<span id="nails-cost">0.00</span></p>
                                <p>Sale Value: $<input type="number" value="0.30" min="0" step="0.01" id="nails-value" onchange="updateItemCosts('nails')"></p>
                                <p>Profit per Craft: $<span id="nails-profit">0.00</span></p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Shell Casing -->
                    <div class="item-card">
                        <div class="item-header" onclick="toggleItem(this)">
                            <span>Shell Casing (makes 20)</span>
                            <span class="toggle-icon"></span>
                        </div>
                        <div class="item-content">
                            <h4>Ingredients:</h4>
                            <table>
                                <tr>
                                    <td>Iron Bar:</td>
                                    <td><input type="number" value="5" min="0" step="1" id="shell-casing-iron-bar" onchange="updateItemCosts('shell-casing')"></td>
                                </tr>
                                <tr>
                                    <td>Copper:</td>
                                    <td><input type="number" value="2" min="0" step="1" id="shell-casing-copper" onchange="updateItemCosts('shell-casing')"></td>
                                </tr>
                            </table>
                            <div>
                                <p>Total Cost: $<span id="shell-casing-cost">0.00</span></p>
                                <p>Sale Value: $<input type="number" value="5.00" min="0" step="0.01" id="shell-casing-value" onchange="updateItemCosts('shell-casing')"></p>
                                <p>Profit per Craft: $<span id="shell-casing-profit">0.00</span></p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Silver Horseshoes -->
                    <div class="item-card">
                        <div class="item-header" onclick="toggleItem(this)">
                            <span>Silver Horseshoes (makes 2)</span>
                            <span class="toggle-icon"></span>
                        </div>
                        <div class="item-content">
                            <h4>Ingredients:</h4>
                            <table>
                                <tr>
                                    <td>Iron Ore:</td>
                                    <td><input type="number" value="4" min="0" step="1" id="silver-horseshoes-iron-ore" onchange="updateItemCosts('silver-horseshoes')"></td>
                                </tr>
                                <tr>
                                    <td>Coal:</td>
                                    <td><input type="number" value="2" min="0" step="1" id="silver-horseshoes-coal" onchange="updateItemCosts('silver-horseshoes')"></td>
                                </tr>
                            </table>
                            <div>
                                <p>Total Cost: $<span id="silver-horseshoes-cost">0.00</span></p>
                                <p>Sale Value: $<input type="number" value="5.00" min="0" step="0.01" id="silver-horseshoes-value" onchange="updateItemCosts('silver-horseshoes')"></p>
                                <p>Profit per Craft: $<span id="silver-horseshoes-profit">0.00</span></p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pickaxe -->
                    <div class="item-card">
                        <div class="item-header" onclick="toggleItem(this)">
                            <span>Pickaxe (makes 1)</span>
                            <span class="toggle-icon"></span>
                        </div>
                        <div class="item-content">
                            <h4>Ingredients:</h4>
                            <table>
                                <tr>
                                    <td>Iron Bar:</td>
                                    <td><input type="number" value="2" min="0" step="1" id="pickaxe-iron-bar" onchange="updateItemCosts('pickaxe')"></td>
                                </tr>
                                <tr>
                                    <td>Wood Logs:</td>
                                    <td><input type="number" value="1" min="0" step="1" id="pickaxe-wood-logs" onchange="updateItemCosts('pickaxe')"></td>
                                </tr>
                            </table>
                            <div>
                                <p>Total Cost: $<span id="pickaxe-cost">0.00</span></p>
                                <p>Sale Value: $<input type="number" value="10.00" min="0" step="0.01" id="pickaxe-value" onchange="updateItemCosts('pickaxe')"></p>
                                <p>Profit per Craft: $<span id="pickaxe-profit">0.00</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Production Calculator Section -->
        <div class="section">
            <div class="section-header" onclick="toggleSection(this)">
                <h2>Production Calculator</h2>
                <span class="toggle-icon"></span>
            </div>
            <div class="section-content">
                <div class="calculator">
                    <div class="calculator-inputs">
                        <div class="form-group">
                            <label for="item-select">Select Item:</label>
                            <select id="item-select" onchange="updateProductionCalculator()">
                                <option value="iron-bar">Iron Bar (makes 5)</option>
                                <option value="nails">Nails (makes 5)</option>
                                <option value="shell-casing">Shell Casing (makes 20)</option>
                                <option value="silver-horseshoes">Silver Horseshoes (makes 2)</option>
                                <option value="pickaxe">Pickaxe (makes 1)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="quantity">Quantity to Produce:</label>
                            <input type="number" id="quantity" value="1" min="1" step="1" onchange="updateProductionCalculator()">
                        </div>
                        <button class="btn" onclick="updateProductionCalculator()">Calculate</button>
                    </div>
                    <div class="calculator-results">
                        <h3>Production Results</h3>
                        <div id="production-materials">
                            <h4>Materials Needed:</h4>
                            <ul id="materials-list">
                                <!-- Populated by JavaScript -->
                            </ul>
                        </div>
                        <div id="production-summary">
                            <h4>Summary:</h4>
                            <p>Total Cost: $<span id="production-cost">0.00</span></p>
                            <p>Total Value: $<span id="production-value">0.00</span></p>
                            <p>Projected Profit: $<span id="production-profit">0.00</span></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Selling Price Overview Section -->
        <div class="section">
            <div class="section-header" onclick="toggleSection(this)">
                <h2>Selling Price Overview</h2>
                <span class="toggle-icon"></span>
            </div>
            <div class="section-content">
                <h3>Individual Item Prices</h3>
                <table id="selling-prices-table">
                    <thead>
                        <tr>
                            <th>Item</th>
                            <th>Sale Price ($)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Nails</td>
                            <td><input type="number" id="nails-price" value="0.30" min="0" step="0.01" onchange="updateAllCalculations()"></td>
                        </tr>
                        <tr>
                            <td>Silver Horseshoe</td>
                            <td><input type="number" id="silver-horseshoes-price" value="5.00" min="0" step="0.01" onchange="updateAllCalculations()"></td>
                        </tr>
                        <tr>
                            <td>Iron Bar</td>
                            <td><input type="number" id="iron-bar-price" value="1.00" min="0" step="0.01" onchange="updateAllCalculations()"></td>
                        </tr>
                        <tr>
                            <td>Pickaxe</td>
                            <td><input type="number" id="pickaxe-price" value="10.00" min="0" step="0.01" onchange="updateAllCalculations()"></td>
                        </tr>
                        <tr>
                            <td>Shell Casing</td>
                            <td><input type="number" id="shell-casing-price" value="5.00" min="0" step="0.01" onchange="updateAllCalculations()"></td>
                        </tr>
                        <tr>
                            <td>Rifle Barrel</td>
                            <td><input type="number" id="rifle-barrel-price" value="45.00" min="0" step="0.01" onchange="updateAllCalculations()"></td>
                        </tr>
                        <tr>
                            <td>Horseshoe</td>
                            <td><input type="number" id="horseshoe-price" value="3.50" min="0" step="0.01" onchange="updateAllCalculations()"></td>
                        </tr>
                        <tr>
                            <td>Hammer</td>
                            <td><input type="number" id="hammer-price" value="8.00" min="0" step="0.01" onchange="updateAllCalculations()"></td>
                        </tr>
                        <tr>
                            <td>Axe</td>
                            <td><input type="number" id="axe-price" value="12.00" min="0" step="0.01" onchange="updateAllCalculations()"></td>
                        </tr>
                        <tr>
                            <td>Knife</td>
                            <td><input type="number" id="knife-price" value="7.00" min="0" step="0.01" onchange="updateAllCalculations()"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Shop Selling Boxes Section -->
        <div class="section">
            <div class="section-header" onclick="toggleSection(this)">
                <h2>Shop Selling Boxes</h2>
                <span class="toggle-icon"></span>
            </div>
            <div class="section-content">
                <h3>Bundle/Box Prices</h3>
                <table id="box-prices-table">
                    <thead>
                        <tr>
                            <th>Bundle/Box</th>
                            <th>Price ($)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Shell Casings Box</td>
                            <td><input type="number" id="shell-casings-box-price" value="35.00" min="0" step="0.01"></td>
                        </tr>
                        <tr>
                            <td>Rifle Set</td>
                            <td><input type="number" id="rifle-set-price" value="600.00" min="0" step="0.01"></td>
                        </tr>
                        <tr>
                            <td>Repeater Set</td>
                            <td><input type="number" id="repeater-set-price" value="450.00" min="0" step="0.01"></td>
                        </tr>
                        <tr>
                            <td>Horseshoe Box</td>
                            <td><input type="number" id="horseshoe-box-price" value="85.00" min="0" step="0.01"></td>
                        </tr>
                        <tr>
                            <td>Blacksmith Tool Set</td>
                            <td><input type="number" id="blacksmith-tool-set-price" value="120.00" min="0" step="0.01"></td>
                        </tr>
                        <tr>
                            <td>Hunting Essentials Kit</td>
                            <td><input type="number" id="hunting-essentials-kit-price" value="75.00" min="0" step="0.01"></td>
                        </tr>
                        <tr>
                            <td>Farming Tools Bundle</td>
                            <td><input type="number" id="farming-tools-bundle-price" value="95.00" min="0" step="0.01"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Data structure for craftable items
        const craftableItems = {
            'iron-bar': {
                name: 'Iron Bar',
                outputQuantity: 5,
                ingredients: {
                    'iron-ore': 5,
                    'coal': 2
                },
                value: 1.00
            },
            'nails': {
                name: 'Nails',
                outputQuantity: 5,
                ingredients: {
                    'iron-bar': 1
                },
                value: 0.30
            },
            'shell-casing': {
                name: 'Shell Casing',
                outputQuantity: 20,
                ingredients: {
                    'iron-bar': 5,
                    'copper': 2
                },
                value: 5.00
            },
            'silver-horseshoes': {
                name: 'Silver Horseshoes',
                outputQuantity: 2,
                ingredients: {
                    'iron-ore': 4,
                    'coal': 2
                },
                value: 5.00
            },
            'pickaxe': {
                name: 'Pickaxe',
                outputQuantity: 1,
                ingredients: {
                    'iron-bar': 2,
                    'wood-logs': 1
                },
                value: 10.00
            }
        };

        // Function to toggle section visibility
        function toggleSection(element) {
            element.classList.toggle('active');
            const content = element.nextElementSibling;
            content.classList.toggle('active');
        }
        
        // Function to toggle item visibility
        function toggleItem(element) {
            element.classList.toggle('active');
            const content = element.nextElementSibling;
            content.classList.toggle('active');
        }
        
        // Function to get material cost
        function getMaterialCost(materialId) {
            const element = document.getElementById(materialId + '-cost');
            return element && element.value ? parseFloat(element.value) : 0;
        }
        
        // Function to update item costs
        function updateItemCosts(itemId) {
            let totalCost = 0;
            
            if (itemId === 'nails') {
                const ironBarQty = parseFloat(document.getElementById('nails-iron-bar').value);
                const ironBarCost = parseFloat(document.getElementById('iron-bar-cost').textContent);
                totalCost = (ironBarQty * ironBarCost) / 5;
            } else if (itemId === 'shell-casing') {
                const ironBarQty = parseFloat(document.getElementById('shell-casing-iron-bar').value);
                const copperQty = parseFloat(document.getElementById('shell-casing-copper').value);
                const ironBarCost = parseFloat(document.getElementById('iron-bar-cost').textContent);
                const copperCost = getMaterialCost('copper');
                totalCost = ((ironBarQty * ironBarCost) / 5) + (copperQty * copperCost);
            } else if (itemId === 'pickaxe') {
                const ironBarQty = parseFloat(document.getElementById('pickaxe-iron-bar').value);
                const woodLogsQty = parseFloat(document.getElementById('pickaxe-wood-logs').value);
                const ironBarCost = parseFloat(document.getElementById('iron-bar-cost').textContent);
                const woodLogsCost = getMaterialCost('wood-logs');
                totalCost = ((ironBarQty * ironBarCost) / 5) + (woodLogsQty * woodLogsCost);
            } else if (itemId === 'iron-bar') {
                const ironOreQty = parseFloat(document.getElementById('iron-bar-iron-ore').value);
                const coalQty = parseFloat(document.getElementById('iron-bar-coal').value);
                const ironOreCost = getMaterialCost('iron-ore');
                const coalCost = getMaterialCost('coal');
                totalCost = (ironOreQty * ironOreCost) + (coalQty * coalCost);
            } else if (itemId === 'silver-horseshoes') {
                const ironOreQty = parseFloat(document.getElementById('silver-horseshoes-iron-ore').value);
                const coalQty = parseFloat(document.getElementById('silver-horseshoes-coal').value);
                const ironOreCost = getMaterialCost('iron-ore');
                const coalCost = getMaterialCost('coal');
                totalCost = (ironOreQty * ironOreCost) + (coalQty * coalCost);
            }
            
            const costElement = document.getElementById(itemId + '-cost');
            costElement.textContent = totalCost.toFixed(2);
            
            const valueElement = document.getElementById(itemId + '-value');
            const value = parseFloat(valueElement.value);
            const profit = value - totalCost;
            
            const profitElement = document.getElementById(itemId + '-profit');
            profitElement.textContent = profit.toFixed(2);
            
            if (profit >= 0) {
                profitElement.className = 'profit-positive';
            } else {
                profitElement.className = 'profit-negative';
            }
        }
        
        // Function to update all calculations
        function updateAllCalculations() {
            updateItemCosts('iron-bar');
            updateItemCosts('nails');
            updateItemCosts('shell-casing');
            updateItemCosts('silver-horseshoes');
            updateItemCosts('pickaxe');
            
            document.getElementById('nails-value').value = document.getElementById('nails-price').value;
            document.getElementById('silver-horseshoes-value').value = document.getElementById('silver-horseshoes-price').value;
            document.getElementById('iron-bar-value').value = document.getElementById('iron-bar-price').value;
            document.getElementById('pickaxe-value').value = document.getElementById('pickaxe-price').value;
            document.getElementById('shell-casing-value').value = document.getElementById('shell-casing-price').value;
            
            updateProductionCalculator();
        }
        
        // Function to update calculations when material costs change
        function updateCalculations() {
            updateAllCalculations();
        }
        
        // Function to calculate raw materials needed for production
        function calculateRawMaterials(itemId, quantity) {
            const rawMaterials = {
                'wood-logs': 0,
                'iron-ore': 0,
                'coal': 0,
                'buck-skin': 0,
                'copper': 0,
                'clay': 0,
                'iron-bar': 0
            };
            
            if (itemId === 'iron-bar') {
                rawMaterials['iron-ore'] += quantity * parseFloat(document.getElementById('iron-bar-iron-ore').value);
                rawMaterials['coal'] += quantity * parseFloat(document.getElementById('iron-bar-coal').value);
            } else if (itemId === 'nails') {
                let ironBarNeeded = quantity * parseFloat(document.getElementById('nails-iron-bar').value);
                let ironBarMaterials = calculateRawMaterials('iron-bar', ironBarNeeded);
                for (let mat in ironBarMaterials) {
                    rawMaterials[mat] += ironBarMaterials[mat];
                }
            } else if (itemId === 'shell-casing') {
                let ironBarNeeded = quantity * parseFloat(document.getElementById('shell-casing-iron-bar').value);
                let copperNeeded = quantity * parseFloat(document.getElementById('shell-casing-copper').value);
                let ironBarMaterials = calculateRawMaterials('iron-bar', ironBarNeeded);
                for (let mat in ironBarMaterials) {
                    rawMaterials[mat] += ironBarMaterials[mat];
                }
                rawMaterials['copper'] += copperNeeded;
            } else if (itemId === 'silver-horseshoes') {
                rawMaterials['iron-ore'] += quantity * parseFloat(document.getElementById('silver-horseshoes-iron-ore').value);
                rawMaterials['coal'] += quantity * parseFloat(document.getElementById('silver-horseshoes-coal').value);
            } else if (itemId === 'pickaxe') {
                let ironBarNeeded = quantity * parseFloat(document.getElementById('pickaxe-iron-bar').value);
                let woodLogsNeeded = quantity * parseFloat(document.getElementById('pickaxe-wood-logs').value);
                let ironBarMaterials = calculateRawMaterials('iron-bar', ironBarNeeded);
                for (let mat in ironBarMaterials) {
                    rawMaterials[mat] += ironBarMaterials[mat];
                }
                rawMaterials['wood-logs'] += woodLogsNeeded;
            }
            return rawMaterials;
        }
        
        // Function to update production calculator results
        function updateProductionCalculator() {
            const itemSelect = document.getElementById('item-select').value;
            const quantity = parseInt(document.getElementById('quantity').value);
            
            const materialsNeeded = calculateRawMaterials(itemSelect, quantity);
            
            const materialsList = document.getElementById('materials-list');
            materialsList.innerHTML = '';
            for (let material in materialsNeeded) {
                if (materialsNeeded[material] > 0) {
                    const li = document.createElement('li');
                    li.textContent = material + ': ' + materialsNeeded[material];
                    materialsList.appendChild(li);
                }
            }
            
            let totalCost = 0;
            for (let material in materialsNeeded) {
                totalCost += materialsNeeded[material] * getMaterialCost(material);
            }
            
            let salePrice = parseFloat(document.getElementById(itemSelect + '-price').value);
            let totalValue = salePrice * quantity;
            let profit = totalValue - totalCost;
            
            document.getElementById('production-cost').textContent = totalCost.toFixed(2);
            document.getElementById('production-value').textContent = totalValue.toFixed(2);
            document.getElementById('production-profit').textContent = profit.toFixed(2);
        }
        
        // Initial calculations on page load
        window.onload = function() {
            updateAllCalculations();
        };
    </script>
</body>
</html>
